import { Controller, GetMapping, PostMapping, PutMapping, DeleteMapping } from '../lib/core/decorator'

@Controller
class {{name}} {
  static prefix = '/{{route}}'

  @GetMapping('/list')
  static async list() {
    const { page, size } = this.ctx.query
    const data = {
      page: parseInt(page) || 1,
      size: parseInt(size) || 10
    }
    return await this.service.{{name}}.list(data)
  }

  @PostMapping('/insert')
  static async insert() {
    const { title, abstract, category, tags, thumbnail } = this.ctx.body
    const data = { title, abstract, category, tags, thumbnail }
    return await this.service.{{name}}.insert(data)
  }

  @PutMapping('/update')
  static async update() {
    const { title, abstract, category, tags, thumbnail } = this.ctx.body
    const data = { title, abstract, category, tags, thumbnail }
    return await this.service.{{name}}.update(data)
  }

  @DeleteMapping('/delete')
  static async detail() {
    const { id } = this.ctx.query
    const data = { id }
    return await this.service.{{name}}.delete(data)
  }
}

export default {{name}}
